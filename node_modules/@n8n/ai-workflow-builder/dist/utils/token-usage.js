"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.extractLastTokenUsage = extractLastTokenUsage;
const messages_1 = require("@langchain/core/messages");
function extractLastTokenUsage(messages) {
    const lastAiAssistantMessage = messages.findLast((m) => m instanceof messages_1.AIMessage &&
        m.response_metadata?.usage !== undefined &&
        'input_tokens' in m.response_metadata.usage &&
        'output_tokens' in m.response_metadata.usage);
    if (!lastAiAssistantMessage) {
        return undefined;
    }
    return lastAiAssistantMessage.response_metadata.usage;
}
//# sourceMappingURL=token-usage.js.map